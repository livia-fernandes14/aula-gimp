"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[65575,76183],{30694:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(691772),a=i(992114);function r(e,t,i,r,s){let o=new URLSearchParams,p=t.reduce((e,t)=>{if(null!=t){let i=function(e){let t;try{t=decodeURIComponent(e)}catch(i){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(n){let i=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(i&&i.length>1)return i[1];return e}}(t);return e.add(i)}return e},new Set);o.append(n.NR.SOURCE_EVENT_ID,e??"0"),o.append(n.NR.DESTINATION,JSON.stringify([...p])),o.append(n.NR.EXPIRY,i?n.uV:n.ug),o.append(n.NR.PRIORITY,i?n.NR.CLICK_PRIORITY:n.NR.VIEW_PRIORITY),s&&o.append(n.NR.ADVERTISER_ID,s),r&&o.append(n.NR.CAMPAIGN_ID,r),o.append(n.NR.SOURCE_EVENT_TYPE,i?n.bC:n.Cu);try{let{hostname:e}=new URL(window.location.href);"www.pinterest.com"!==e&&o.append(n.NR.HOSTNAME,e)}catch(e){(0,a.nP)("webapp.arapi.generateARASourceEventURL",{sampleRate:.1,tags:{status:"failed",href:window&&window.location&&window.location.href}})}return"https://www.pinterest.com/attribution_source/?"+o.toString()}},576183:(e,t,i)=>{i.d(t,{G6:()=>r,i7:()=>s,oi:()=>n,u$:()=>a,un:()=>p,vU:()=>o,w1:()=>d});let n=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),a=e=>e?e.includes("Chrome")?n.CHROME:e.includes("Safari")?n.SAFARI:e.includes("Firefox")?n.FIREFOX:e.includes("Opera")?n.OPERA:e.includes("IE")?n.IE:e.includes("Edge")?n.EDGE:n.OTHER:n.OTHER;function r(e){return a(e)===n.SAFARI}function s(e){return a(e)===n.CHROME}function o(e){return a(e)===n.FIREFOX}function p(e){return a(e)===n.EDGE}function d(e){return a(e)===n.IE}},586033:(e,t,i)=>{i.d(t,{Fw:()=>P,ZP:()=>y});var n=i(667294),a=i(30694),r=i(18644),s=i(992114);async function o(e,t,i,n,o,p,d,l,m){let c,{appType:u,osType:T}=p||{},g="",w="";if(["Pin","pinImpressions"].includes(e)&&t&&(n||l||m)){(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:u,osType:T}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting"))return void(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:u,osType:T}});g=(0,a.Z)(i,[n,l,m],!1,o,d);try{w=new URL(window.location.href).hostname}catch(e){(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"hostname_parse_failed",href:window&&window.location&&window.location.href}})}if(w&&"www.pinterest.com"!==w)document.createElement("img").setAttribute("attributionsrc",g),(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"international",appType:u,osType:T,hostname:w}});else if(!(c=await window.fetch(g,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}})).ok)throw Error("server request failed.");(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:u,osType:T}})}catch(e){(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:(0,r.Z)(e,"name"),message:(0,r.Z)(e,"message"),appType:u,osType:T,hostname:w,responseStatus:c&&c.status}})}}else(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:u,osType:T}})}var p=i(576183),d=i(19963),l=i(824834),m=i(94970),c=i(174646),u=i(538645),T=i(422908),g=i(813509),w=i(438596);let I={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},v=({events:e,startTime:t,endTime:i})=>e?.filter(e=>e>=t&&e<=i)||[];function y({carouselData:e,closeupImpressionType:t,closeupNavigationType:i,componentType:a,contextLogData:r,clientTrackingParams:y,duploShouldTrackPinEvents:P,elementType:f,impressionAuxFields:x,inImpressionExp:S,impressionType:D,impressionsFramework:h,isPaused:E,loggingId:b,objectIdStr:R,slotIndex:_,trackCarousel:A,viewData:k,viewParameter:N,viewType:F,isPromoted:C,storyPinProductEventData:O}){let{logContextEvent:L}=(0,d.u)(),{logMrcVideoAdEventOnPlay:Z}=(0,T.H)(),{userAgent:{browserName:H}}=(0,c.B)(),{logStat:M}=(0,g.Yg)(),j=h||m.Z,B=(0,n.useRef)(null),U=(0,n.useRef)(e=>{});U.current=n=>{let s=I[D],d=s.idType,l={clientTrackingParams:y,endTime:n.endTime,[d]:b,slotIndex:_,time:n.startTime,renderDuration:n.endTime-n.startTime,type:t,...x,forcedExit:"removed"===n.forcedExit?0:void 0};if("Pin"===D){let e=[],t=n.visibleEvents||new Map,i=n.hiddenEvents||new Map;if((x&&x.isPromoted||C)&&[1,50,80,2,102].forEach(a=>{let r=v({events:t.get(a),startTime:n.startTime,endTime:n.endTime}),s=v({events:i.get(a),startTime:n.startTime,endTime:n.endTime});r.forEach(t=>{e.push({type:a,time:t||0,visible:!0})}),s.forEach(t=>{e.push({type:a,time:t||0,visible:!1})})}),l={...l,pinCellWidth:n.pinCellWidth||0,pinCellHeight:n.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,t)=>e.time-t.time)},(0,p.i7)(H)&&x&&x.isPromoted){let{attributionSourceId:e,isPromoted:t,link:i,campaignId:n,araAuxData:a,advertiserId:r,domain:s,adDestinationUrl:p}=x;o(D,t??null,e??null,i??null,n??null,a??null,r??null,s??null,p??null)}}let m={component:a,object_id_str:R,view_type:F,view_data:k||{},view_parameter:N};if(A)e&&A&&L({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...l,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...m,aux_data:{...r}});else{let e={clientTrackingParams:y,event_type:s.eventType,...m,element:f,event_data:{[s.impressionType]:"Story"===D?l:[l],...O?{storyPinProductEventData:O}:{}},aux_data:{closeup_navigation_type:i,...r}};L(e),Z(e)}P&&M("log_pin_impression")};let{expName:V,group:W}=(0,l.Z)({skipActivation:!0}),Y=(0,u.ZP)(),G=(0,w.Zv)(),{isAuthenticated:J}=(0,c.B)(),X=(0,n.useCallback)(()=>{let e=!1;try{let{current:t}=B;if(t instanceof HTMLElement&&(!C||t.getElementsByTagName("img").length>0)){let i=j.start(t);i.onExitViewport(U.current).setDebugId(b||"unknown"),P&&i.onEnterViewport(()=>{M("log_pin_impression_track_enter_viewport")}),e=!0,W&&(0,s.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:Y,experimentName:V,group:W,handlerId:G,isAuthenticated:J,slotIndex:_??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}P&&M("log_pin_impression_track",{didStartTracking:e})},[B.current]);return(0,n.useEffect)(()=>(S&&!j.inExperiment&&j.setExperimentStatus(!0),E||X(),()=>{let{current:e}=B;e instanceof HTMLElement&&(!C||e.getElementsByTagName("img").length>0)&&j.stop(e)}),[E,X]),B}let P=({children:e,...t})=>e({impressionTrackerRef:y(t)})},422908:(e,t,i)=>{i.d(t,{H:()=>d,W:()=>l});var n=i(667294),a=i(19963),r=i(218291),s=i(967312),o=i(785893);let{Provider:p,get:d}=(0,r.Z)("VideoPlayer");function l({children:e}){let{logContextEvent:t,logImpression:i}=(0,a.u)(),{checkExperiment:r}=(0,s.ru)(),[d,l]=(0,n.useState)(!1),[m,c]=(0,n.useState)([]),[u,T]=(0,n.useState)([]),[g,w]=(0,n.useState)({}),I=r("web_ads_mrc_video_impression").anyEnabled,v=e=>{w(t=>({...t,[e]:!0}))},y=(0,n.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:t}=e.event_data.pinImpressions[0],i=JSON.stringify(e.aux_data?.commerce_data||"").includes("story_pin_id");I&&(t||i)&&c(t=>[...t,e].slice(-1e3))}},[I]),P=(0,n.useCallback)(e=>{18===e.eventType&&I&&T(t=>[...t,e].slice(-1e3))},[I]);(0,n.useEffect)(()=>{let e=m.filter(e=>{let{pinIdStr:i}=e.event_data.pinImpressions[0];return!g[i]||!I||(t((e=>{let{time:t}=e.event_data.pinImpressions[0];return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:t,renderDuration:0}]}}})(e)),!1)});e.length!==m.length&&c(e)},[m,I,t,g]),(0,n.useEffect)(()=>{let e=u.filter(e=>{let t=e.eventData?.pinIdStr;if(!t)return!1;if(g[t]&&I){let t=(e=>{if(e.eventData){let{time:t}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:t??0}}}return null})(e);return t&&i(t),!1}return!0});e.length!==u.length&&T(e)},[u,I,i,g]);let f=(0,n.useMemo)(()=>({captionsEnabled:d,logMrcVideoAdImpressionOnPlay:P,logMrcVideoAdEventOnPlay:y,setCaptionsEnabled:l,setVideoPlayed:v,videosPlayed:g}),[d,y,P,g]);return(0,o.jsx)(p,{value:f,children:e})}},765575:(e,t,i)=>{i.d(t,{Cy:()=>d,HE:()=>l,JE:()=>u,Mv:()=>r,Y4:()=>m,dL:()=>a,fS:()=>c,fv:()=>o,qS:()=>p,u:()=>T,uc:()=>s});var n=i(586033);let a=e=>{let t=(0,n.ZP)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,duploShouldTrackPinEvents:e.duploShouldTrackPinEvents,loggingId:e.loggingId,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Pin",isPaused:e.isPaused,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},r=e=>{let t=(0,n.ZP)({impressionAuxFields:{newsType:e.newsType,displayMode:e.displayMode,newsIndex:e.newsIndex||0,tapItemIdStr:e.tapItemIdStr},contextLogData:e.auxData||{},impressionType:"Notification",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:t})},s=e=>{let t=(0,n.ZP)({impressionAuxFields:{newsType:e.newsType},contextLogData:e.auxData||{},impressionType:"NotificationFeed",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:t})},o=e=>{let t=(0,n.ZP)({impressionAuxFields:{...e.impressionData||{}},contextLogData:e.auxData||{},componentType:e.component,isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,impressionType:"Article"});return e.children({impressionTrackerRef:t})},p=e=>{let t=(0,n.ZP)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Story",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},d=e=>{let t=(0,n.ZP)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0,contextLogData:e.auxData||{},componentType:e.component,impressionType:"User",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},l=e=>{let t=(0,n.ZP)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Interest",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},m=e=>{let t=(0,n.ZP)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"TodayArticle",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},c=e=>{let t=(0,n.ZP)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Board",loggingId:e.loggingId,viewType:e.viewType||1,viewParameter:e.viewParameter,viewData:e.viewData});return e.children({impressionTrackerRef:t})},u=e=>{let t=(0,n.ZP)({carouselData:e.carouselData,impressionType:"Pin",loggingId:e.loggingId,slotIndex:e.slotIndex??0,trackCarousel:!0,viewParameter:e.viewParameter||72,viewType:e.viewType||1,isPaused:e.isPaused,contextLogData:e.contextLogData,componentType:e.component,impressionAuxFields:e.impressionAuxFields});return e.children({impressionTrackerRef:t})},T=e=>{let t=(0,n.ZP)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"EditorialBoard",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/65575-bb405efb3af76e26.mjs.map